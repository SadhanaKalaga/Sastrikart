<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - SastriKart</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #ff5722;
            --secondary-color: #ff9800;
            --light-bg: #f9f7f1;
            --dark-text: #333;
            --light-text: #f9f9f9;
            --header-bg: rgba(255, 87, 34, 0.9);
            --card-shadow: 0 2px 5px 0 rgba(0,0,0,0.1);
        }

        body {
            font-family: 'Arial', sans-serif;
            background-color: var(--light-bg);
            color: var(--dark-text);
        }

        .sidebar {
            position: fixed;
            top: 0;
            left: 0;
            height: 100%;
            width: 250px;
            background-color: #343a40;
            color: white;
            padding-top: 20px;
        }

        .sidebar .nav-link {
            color: white;
        }

        .sidebar .nav-link.active {
            background-color: var(--primary-color);
        }

        .main-content {
            margin-left: 250px;
            padding: 20px;
        }

        .stat-card {
            background-color: white;
            border-radius: 5px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: var(--card-shadow);
        }

        .chart-container, .table-container, .form-container {
            background-color: white;
            padding: 20px;
            border-radius: 5px;
            box-shadow: 0 2px 5px 0 rgba(0,0,0,0.1);
            margin-top: 20px;
        }

        .admin-section {
            display: none;
        }

        .admin-section.active {
            display: block;
        }

    </style>
</head>
<body>
    <div class="sidebar">
        <h3 class="text-center">SastriKart Admin</h3>
        <ul class="nav flex-column">
            <li class="nav-item"><a class="nav-link active" href="#" data-target="dashboard"><i class="fas fa-tachometer-alt"></i> Dashboard</a></li>
            <li class="nav-item"><a class="nav-link" href="#" data-target="users"><i class="fas fa-users"></i> Users</a></li>
            <li class="nav-item"><a class="nav-link" href="#" data-target="priests"><i class="fas fa-user-tie"></i> Priests</a></li>
            <li class="nav-item"><a class="nav-link" href="#" data-target="bookings"><i class="fas fa-calendar-check"></i> Bookings</a></li>
            <li class="nav-item"><a class="nav-link" href="#" data-target="settings"><i class="fas fa-cog"></i> Settings</a></li>
            <li class="nav-item"><a class="nav-link" href="#" id="logout-btn"><i class="fas fa-sign-out-alt"></i> Logout</a></li>
        </ul>
    </div>

    <div class="main-content">
        <div id="dashboard" class="admin-section active">
            <h1 class="mt-4">Dashboard</h1>
            <div class="row">
                <div class="col-md-3">
                    <div class="stat-card text-center">
                        <h4>Total Users</h4>
                        <h2 id="total-users">0</h2>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="stat-card text-center">
                        <h4>Total Priests</h4>
                        <h2 id="total-priests">0</h2>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="stat-card text-center">
                        <h4>Total Bookings</h4>
                        <h2 id="total-bookings">0</h2>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="stat-card text-center">
                        <h4>Revenue</h4>
                        <h2 id="total-revenue">â‚¹0</h2>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-6">
                    <div class="chart-container">
                        <canvas id="bookings-chart"></canvas>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="chart-container">
                        <canvas id="revenue-chart"></canvas>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-12">
                    <div class="chart-container">
                        <h4>Recent Bookings</h4>
                        <table class="table table-striped">
                            <thead>
                                <tr>
                                    <th>Booking ID</th>
                                    <th>User</th>
                                    <th>Priest</th>
                                    <th>Service</th>
                                    <th>Date</th>
                                    <th>Amount</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody id="recent-bookings-table">
                                <!-- Data will be injected by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <div id="users" class="admin-section">
            <div class="d-flex justify-content-between align-items-center">
                <h1 class="mt-4">Manage Users</h1>
                <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#userModal"><i class="fas fa-plus"></i> Add New User</button>
            </div>
            <div class="table-container mt-4">
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th>User ID</th>
                            <th>Name</th>
                            <th>Email</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="users-table-body">
                        <!-- User data will be injected here -->
                    </tbody>
                </table>
            </div>
        </div>

        <div id="priests" class="admin-section">
            <div class="d-flex justify-content-between align-items-center">
                <h1 class="mt-4">Manage Priests</h1>
                <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#priestModal"><i class="fas fa-plus"></i> Add New Priest</button>
            </div>
            <div class="table-container mt-4">
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th>Priest ID</th>
                            <th>Name</th>
                            <th>Email</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="priests-table-body">
                        <!-- Priest data will be injected here -->
                    </tbody>
                </table>
            </div>
        </div>

        <div id="bookings" class="admin-section">
            <h1 class="mt-4">Manage Bookings</h1>
            <div class="table-container mt-4">
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th>Booking ID</th>
                            <th>User</th>
                            <th>Priest</th>
                            <th>Service</th>
                            <th>Date</th>
                            <th>Amount</th>
                            <th>Status</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="bookings-table-body">
                        <!-- Booking data will be injected here -->
                    </tbody>
                </table>
            </div>
        </div>

        <div id="settings" class="admin-section">
            <h1 class="mt-4">Settings</h1>
            <div class="form-container mt-4">
                <form>
                    <div class="mb-3">
                        <label for="adminName" class="form-label">Your Name</label>
                        <input type="text" class="form-control" id="adminName" value="Admin">
                    </div>
                    <div class="mb-3">
                        <label for="adminEmail" class="form-label">Email address</label>
                        <input type="email" class="form-control" id="adminEmail" value="admin@sastrikart.com">
                    </div>
                    <div class="mb-3">
                        <label for="adminPassword" class="form-label">New Password</label>
                        <input type="password" class="form-control" id="adminPassword">
                    </div>
                    <button type="submit" class="btn btn-primary">Save Settings</button>
                </form>
            </div>
        </div>
    </div>

    <!-- User Modal -->
    <div class="modal fade" id="userModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="userModalLabel">Add User</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="userForm">
                        <input type="hidden" id="userId">
                        <div class="mb-3">
                            <label for="userName" class="form-label">Name</label>
                            <input type="text" class="form-control" id="userName" required>
                        </div>
                        <div class="mb-3">
                            <label for="userEmail" class="form-label">Email</label>
                            <input type="email" class="form-control" id="userEmail" required>
                        </div>
                        <div class="mb-3">
                            <label for="userPassword" class="form-label">Password</label>
                            <input type="password" class="form-control" id="userPassword">
                            <small class="form-text text-muted">Leave blank to keep current password.</small>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="submit" form="userForm" class="btn btn-primary">Save changes</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Priest Modal -->
    <div class="modal fade" id="priestModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="priestModalLabel">Add Priest</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="priestForm">
                        <input type="hidden" id="priestId">
                        <div class="mb-3">
                            <label for="priestName" class="form-label">Name</label>
                            <input type="text" class="form-control" id="priestName" required>
                        </div>
                        <div class="mb-3">
                            <label for="priestEmail" class="form-label">Email</label>
                            <input type="email" class="form-control" id="priestEmail" required>
                        </div>
                        <div class="mb-3">
                            <label for="priestPassword" class="form-label">Password</label>
                            <input type="password" class="form-control" id="priestPassword">
                            <small class="form-text text-muted">Leave blank to keep current password.</small>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="submit" form="priestForm" class="btn btn-primary">Save changes</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Mock Data
            const mockData = {
                totalUsers: 1250,
                totalPriests: 75,
                totalBookings: 540,
                totalRevenue: 850000,
                bookingsByMonth: [50, 60, 80, 75, 90, 110, 120, 150, 130, 160, 180, 200],
                revenueByMonth: [75000, 90000, 120000, 110000, 130000, 160000, 180000, 220000, 200000, 240000, 260000, 280000],
                recentBookings: [
                    { id: 'BK-12345', user: 'Ramesh Kumar', priest: 'Acharya Sharma', service: 'Griha Pravesh', date: '2025-08-03', amount: 8000, status: 'Completed' },
                    { id: 'BK-12346', user: 'Sunita Devi', priest: 'Pandit Joshi', service: 'Satyanarayan Pooja', date: '2025-08-02', amount: 4500, status: 'Completed' },
                    { id: 'BK-12347', user: 'Amit Singh', priest: 'Shastriji Maharaj', service: 'Vastu Shanti', date: '2025-08-05', amount: 12000, status: 'Upcoming' },
                    { id: 'BK-12348', user: 'Priya Sharma', priest: 'Acharya Sharma', service: 'Namkaran Sanskar', date: '2025-08-06', amount: 3000, status: 'Upcoming' },
                ],
                users: [
                    { id: 'U1001', name: 'Ramesh Kumar', email: 'ramesh@example.com' },
                    { id: 'U1002', name: 'Sunita Devi', email: 'sunita@example.com' },
                    { id: 'U1003', name: 'Amit Singh', email: 'amit@example.com' },
                    { id: 'U1004', name: 'Priya Sharma', email: 'priya@example.com' }
                ],
                priests: [
                    { id: 'P2001', name: 'Acharya Sharma', email: 'acharya.sharma@example.com' },
                    { id: 'P2002', name: 'Pandit Joshi', email: 'pandit.joshi@example.com' },
                    { id: 'P2003', name: 'Shastriji Maharaj', email: 'shastriji@example.com' },
                ]
            };

            // Navigation
            const navLinks = document.querySelectorAll('.sidebar .nav-link');
            const adminSections = document.querySelectorAll('.admin-section');

            navLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const target = this.dataset.target;

                    navLinks.forEach(navLink => navLink.classList.remove('active'));
                    this.classList.add('active');

                    adminSections.forEach(section => {
                        if (section.id === target) {
                            section.classList.add('active');
                        } else {
                            section.classList.remove('active');
                        }
                    });
                });
            });

            // Populate Stat Cards
            document.getElementById('total-users').textContent = mockData.totalUsers.toLocaleString();
            document.getElementById('total-priests').textContent = mockData.totalPriests.toLocaleString();
            document.getElementById('total-bookings').textContent = mockData.totalBookings.toLocaleString();
            document.getElementById('total-revenue').textContent = 'â‚¹' + mockData.totalRevenue.toLocaleString();

            // Bookings Chart
            const bookingsChartCtx = document.getElementById('bookings-chart').getContext('2d');
            new Chart(bookingsChartCtx, {
                type: 'line',
                data: {
                    labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
                    datasets: [{
                        label: 'Bookings',
                        data: mockData.bookingsByMonth,
                        borderColor: 'rgba(255, 87, 34, 1)',
                        backgroundColor: 'rgba(255, 87, 34, 0.2)',
                        fill: true,
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        title: {
                            display: true,
                            text: 'Bookings per Month'
                        }
                    }
                }
            });

            // Revenue Chart
            const revenueChartCtx = document.getElementById('revenue-chart').getContext('2d');
            new Chart(revenueChartCtx, {
                type: 'bar',
                data: {
                    labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
                    datasets: [{
                        label: 'Revenue',
                        data: mockData.revenueByMonth,
                        backgroundColor: 'rgba(255, 152, 0, 1)',
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        title: {
                            display: true,
                            text: 'Revenue per Month'
                        }
                    }
                }
            });

            // Populate Recent Bookings Table
            const recentBookingsTable = document.getElementById('recent-bookings-table');
            mockData.recentBookings.forEach(booking => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${booking.id}</td>
                    <td>${booking.user}</td>
                    <td>${booking.priest}</td>
                    <td>${booking.service}</td>
                    <td>${booking.date}</td>
                    <td>â‚¹${booking.amount.toLocaleString()}</td>
                    <td><span class="badge bg-${booking.status === 'Completed' ? 'success' : 'warning'}">${booking.status}</span></td>
                `;
                recentBookingsTable.appendChild(row);
            });

            // Users Table
            const usersTableBody = document.getElementById('users-table-body');
            function renderUsers() {
                usersTableBody.innerHTML = '';
                mockData.users.forEach(user => {
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${user.id}</td>
                        <td>${user.name}</td>
                        <td>${user.email}</td>
                        <td>
                            <button class="btn btn-sm btn-warning edit-user-btn" data-id="${user.id}"><i class="fas fa-edit"></i></button>
                            <button class="btn btn-sm btn-danger delete-user-btn" data-id="${user.id}"><i class="fas fa-trash"></i></button>
                        </td>
                    `;
                    usersTableBody.appendChild(row);
                });
            }
            renderUsers();

            // Priests Table
            const priestsTableBody = document.getElementById('priests-table-body');
            function renderPriests() {
                priestsTableBody.innerHTML = '';
                mockData.priests.forEach(priest => {
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${priest.id}</td>
                        <td>${priest.name}</td>
                        <td>${priest.email}</td>
                        <td>
                            <button class="btn btn-sm btn-warning edit-priest-btn" data-id="${priest.id}"><i class="fas fa-edit"></i></button>
                            <button class="btn btn-sm btn-danger delete-priest-btn" data-id="${priest.id}"><i class="fas fa-trash"></i></button>
                        </td>
                    `;
                    priestsTableBody.appendChild(row);
                });
            }
            renderPriests();

            // Bookings Table
            const bookingsTableBody = document.getElementById('bookings-table-body');
            function renderBookings() {
                bookingsTableBody.innerHTML = '';
                mockData.recentBookings.forEach(booking => {
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${booking.id}</td>
                        <td>${booking.user}</td>
                        <td>${booking.priest}</td>
                        <td>${booking.service}</td>
                        <td>${booking.date}</td>
                        <td>â‚¹${booking.amount.toLocaleString()}</td>
                        <td><span class="badge bg-${booking.status === 'Completed' ? 'success' : 'warning'}">${booking.status}</span></td>
                        <td>
                            <button class="btn btn-sm btn-info view-booking-btn" data-id="${booking.id}"><i class="fas fa-eye"></i></button>
                        </td>
                    `;
                    bookingsTableBody.appendChild(row);
                });
            }
            renderBookings();

            // Logout
            document.getElementById('logout-btn').addEventListener('click', function(e) {
                e.preventDefault();
                localStorage.clear();
                window.location.href = 'index.html';
            });
        });
    </script>
</body>
</html>